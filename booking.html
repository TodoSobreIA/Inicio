<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Reserva tu Clase | Todo Sobre IA</title>

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&family=Space+Grotesk:wght@400;600&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css" />

  <style>
    :root{ --bg:#0b0f17; --card:rgba(255,255,255,0.06); --text:#e6e9ef; --muted:#93a1b1; --line:rgba(255,255,255,0.08); --acc:#00f0ff; --acc2:#8a2be2; --glow:0 0 32px rgba(0,240,255,.35); }
    *{ box-sizing:border-box; }
    body{
      font-family:'Inter','Roboto',system-ui,sans-serif;
      background:
        radial-gradient(1200px 800px at 80% -10%, rgba(0,240,255,.08), transparent 60%),
        radial-gradient(900px 600px at 10% 110%, rgba(138,43,226,.10), transparent 60%),
        var(--bg);
      color:var(--text); padding-top:70px;
    }
    .top-bar{ background:rgba(20,22,30,.6); backdrop-filter:blur(10px); border-bottom:1px solid var(--line); padding:10px; display:flex; justify-content:center; gap:10px; position:fixed; top:0; left:0; width:100%; z-index:1000; }
    .top-bar a{ color:var(--text); text-decoration:none; font-weight:600; padding:10px 14px; border-radius:10px; background:linear-gradient(180deg, rgba(255,255,255,.08), rgba(255,255,255,.04)); border:1px solid var(--line); display:inline-flex; align-items:center; gap:8px; }
    .top-bar a:hover{ box-shadow:var(--glow); border-color:rgba(0,240,255,.35); }
    .hero-mini{ height:22vh; display:flex; align-items:center; justify-content:center; text-align:center; color:#fff; padding:12px; position:relative; isolation:isolate; overflow:hidden; background:
      radial-gradient(1200px 600px at 10% 20%, rgba(0,240,255,.20), transparent 60%),
      radial-gradient(900px 500px at 90% 30%, rgba(138,43,226,.18), transparent 60%),
      linear-gradient(180deg,#0b0f17,#0b0f17);
    }
    .hero-mini h1{ font-family:'Space Grotesk',sans-serif; font-weight:800; letter-spacing:.4px; text-shadow:0 0 8px rgba(0,240,255,.45); border-bottom:1px dashed rgba(255,255,255,.2); display:inline-block; padding-bottom:.3rem; margin-bottom:.4rem; }
    .hero-mini p{ color:#cfd8e3; margin:0; }

    .form-container{ max-width:760px; margin:26px auto 40px; padding:22px; background:var(--card); border:1px solid var(--line); border-radius:16px; box-shadow:0 8px 22px rgba(0,0,0,.25); }
    .form-container h2{ font-weight:800; margin-bottom:12px; letter-spacing:.3px; }
    label{ font-weight:600; margin-top:10px; }
    input, textarea, select{ background:rgba(255,255,255,.06); border:1px solid var(--line); color:var(--text); border-radius:10px; padding:10px 12px; width:100%; }
    input::placeholder, textarea::placeholder{ color:#9aa3b2; }
    textarea{ resize:vertical; min-height:120px; }

    .btn-primary{ background:linear-gradient(90deg, var(--acc), var(--acc2)); color:#000; font-weight:800; border:0; border-radius:12px; box-shadow:0 8px 24px rgba(0,240,255,.25); }
    .btn-primary:disabled{ opacity:.55; cursor:not-allowed; filter:grayscale(.2); }

    #paypal-button-container{ margin-top:16px; text-align:center; }
    .back-to-home{ display:block; text-align:center; margin-top:18px; color:var(--text); text-decoration:none; }
    .back-to-home:hover{ text-decoration:underline; }
    .help{ color:var(--muted); font-size:.9rem; }
  </style>
</head>
<body>

  <div class="top-bar">
    <a href="index.html"><i class="fa-solid fa-house"></i> Inicio</a>
    <a href="https://www.youtube.com/playlist?list=PLWb26fiXZci1EcLpFe1RWS2AVNw-z4zpE" target="_blank"><i class="fa-solid fa-graduation-cap"></i> Cursos Online</a>
    <a href="https://buymeacoffee.com/todosobreia/extras" target="_blank"><i class="fa-solid fa-download"></i> Plantillas & Scripts</a>
  </div>

  <header class="hero-mini">
    <div>
      <h1>Reserva tu Clase</h1>
      <p>Sesión 1 a 1 para resolver justo lo que necesitas</p>
    </div>
  </header>

  <main class="form-container">
    <h2 class="mb-1"><i class="fa-solid fa-calendar-check me-2"></i>Datos de la reserva</h2>
    <p class="help mb-3">Completa el formulario. El envío se activará cuando el pago se confirme.</p>

    <!-- ===== FORMSubmit (usa tu email ahora; luego cambia a TU_ENDPOINT_SECRETO) ===== -->
    <form id="reservation-form" action="https://formsubmit.co/aprendecondanielyt@gmail.com" method="POST" novalidate>
      <!-- Si ya tienes el endpoint secreto, usa esta línea en su lugar:
      <form id="reservation-form" action="https://formsubmit.co/TU_ENDPOINT_SECRETO" method="POST" novalidate> -->

      <label for="email">Correo electrónico</label>
      <input type="email" id="email" name="email" required placeholder="tu@correo.com" />

      <label for="telefono">Teléfono (opcional — WhatsApp/Telegram)</label>
      <input type="tel" id="telefono" name="telefono" placeholder="Ej: +34 612345678" />

      <div class="row g-3">
        <div class="col-sm-6">
          <label for="fecha">Fecha</label>
          <input type="date" id="fecha" name="fecha" required />
          <div class="help mt-1">Horario disponible: 09:00–21:00 (hora Madrid UTC/GMT +1)</div>
        </div>
        <div class="col-sm-6">
          <label for="hora">Hora</label>
          <input type="time" id="hora" name="hora" min="09:00" max="21:00" step="900" required />
        </div>
      </div>

      <label for="descripcion" class="mt-2">¿Qué necesitas?</label>
      <textarea id="descripcion" name="descripcion" rows="4" required placeholder="Ej: Aprender IA desde cero, humanizar textos, crear GPTs personalizados, automatizaciones..."></textarea>

      <!-- ===== Config FormSubmit ===== -->
      <input type="hidden" name="_subject"  value="Nueva reserva (web)" />
      <input type="hidden" name="_captcha"  value="false" />
      <input type="hidden" name="_template" value="table" />
      <input type="hidden" name="_next"     value="https://todosobreia.github.io/Inicio/gracias.html" />
      <!-- Honeypot anti-spam -->
      <input type="text" name="_honey" style="display:none" tabindex="-1" autocomplete="off">

      <button type="submit" id="submit-btn" class="btn btn-primary w-100 mt-3" disabled>Enviar Reserva</button>
    </form>

    <div id="paypal-button-container"></div>
    <a href="index.html" class="back-to-home"><i class="fa-solid fa-arrow-left"></i> Volver al Inicio</a>
  </main>

   <script src="https://www.paypal.com/sdk/js?client-id=AT7uY45j9iPLT3CBh8SOAwvp281DF-Buip9vJGa9SuQWJszWF1Orm467o_RoeDiOXi0chI071MUh1bsa&currency=EUR"></script>

  <script>
    // ====== Fecha mínima (hoy +1) ======
    (function(){
      const fecha = document.getElementById('fecha');
      const d = new Date(); d.setDate(d.getDate() + 1);
      const iso = d.toISOString().slice(0,10);
      fecha.min = iso;
      if(!fecha.value) fecha.value = iso;
    })();

    // ====== Validación 15 min ======
    const horaInput = document.getElementById('hora');
    function validateQuarterHour() {
      if (!horaInput.value) return;
      const [hh, mm] = horaInput.value.split(':').map(Number);
      const ok = [0,15,30,45].includes(mm);
      horaInput.setCustomValidity(ok ? '' : 'Selecciona una hora en :00, :15, :30 o :45.');
    }
    horaInput.addEventListener('input', validateQuarterHour);
    horaInput.addEventListener('change', validateQuarterHour);

    // ====== PayPal ======
    const paymentAmount = '25.00';
    const submitBtn = document.getElementById('submit-btn');

    paypal.Buttons({
      createOrder: (data, actions) => actions.order.create({
        purchase_units: [{ amount: { value: paymentAmount } }]
      }),
      onApprove: (data, actions) => actions.order.capture().then((details) => {
        alert('¡Pago completado, ' + details.payer.name.given_name + '! Ahora puedes enviar tu reserva.');
        const form = document.getElementById('reservation-form');
        const input = document.createElement('input');
        input.type = 'hidden'; input.name = 'paymentID'; input.value = data.orderID;
        form.appendChild(input);
        submitBtn.disabled = false;
      }),
      onError: (err) => {
        console.error('Error en el pago:', err);
        alert('Ocurrió un error durante el pago. Por favor, inténtalo de nuevo.');
      }
    }).render('#paypal-button-container');

    // ====== Validación final ======
    document.getElementById('reservation-form').addEventListener('submit', function(e){
      validateQuarterHour();
      if (!this.checkValidity()) { e.preventDefault(); this.reportValidity(); }
    });
  </script>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
